<!doctype html><html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Spring StateMachine踩坑</title><meta name=generator content="Hugo 0.112.3"><link rel=stylesheet href="https://zenuo.github.io/css/styles.min.da6e1927bcb6a0faebcb06ab9925c87524b8057860afacf48eab54fcbf9eef18.css" integrity="sha256-2m4ZJ7y2oPrrywarmSXIdSS4BXhgr6z0jqtU/L+e7xg="><script async defer data-domain=kaiwern.com src=https://plausible.io/js/plausible.js></script>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Lora&family=Source+Sans+Pro:wght@400;600&display=swap" rel=stylesheet><body class="flex flex-col min-h-screen px-6 max-w-prose md:w-2/3 m-auto"><nav class=mt-8><ul id=nav-menu class="w-full flex items-center list-reset"><li><a href=https://zenuo.github.io/>Home</a></li><li><a href=https://zenuo.github.io/series/>Series</a></li><li><a href=https://zenuo.github.io/fragments/>Fragments</a></li><li><a href=https://zenuo.github.io/about/>About</a></li><li><a href=https://zenuo.github.io/tags/>Tags</a></li></ul></nav><main class="flex-1 mt-10 sm:mt-12"><header class="mb-8 font-sans-serif"><div class="text-sm font-gray-700 mb-8"><p class="uppercase font-semibold"><a class=text-gray-700 href=/posts>posts</a></p><p>May 14, 2022</p></div><h1 class="title mb-2">Spring StateMachine踩坑</h1><p class="text-sm font-gray-700 mb-4 italic">Estimated Reading Time: 1 minutes (7 words)</p><div id=tags></div></header><article class="prose serif mb-12 text-gray-800"><p>最近做的客户管理项目，其中客户的开户、合同变更、合同续签功能涉及到走审批（基于公司采购的致远OA系统），业务上有这些需求：</p><ol><li>某个确定的功能（比如客户开户）由某些确定的状态、动作组成</li><li>某些状态流转取决于审批结果是通过还是拒绝</li><li>某个状态允许重新流转</li></ol><p>为了实现这些需求，可以简单粗暴if-else硬编码来实现（画面太美），为了代码的可维护性，团队考虑引入某些开源框架来优化，先后调研了工作流框架Flowable、状态机框架<a href=https://docs.spring.io/spring-statemachine/docs/current/reference/>Spring StateMachine</a>，基于学习成本和运维成本考虑，决定引入更加轻量的Spring StateMachine。如何快速入手可以参考官网，先介绍一下我们的实践的宏观结构。</p></article></main><hr><footer class="w-full text-center p-4 pin-b text-xs text-gray-400"><p>made with <a href=https://gohugo.io class="underline hover:text-blue-400">Hugo</a> and <a href=https://tailwindcss.com class="underline hover:text-blue-400">TailwindCSS</a></p></footer></body></html>