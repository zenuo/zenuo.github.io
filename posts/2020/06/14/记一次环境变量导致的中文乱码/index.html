<!doctype html><html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ğŸ§¯è®°ä¸€æ¬¡ç¯å¢ƒå˜é‡å¯¼è‡´çš„ä¸­æ–‡ä¹±ç </title><meta name=generator content="Hugo 0.112.3"><link rel=stylesheet href="https://zenuo.github.io/css/styles.min.da6e1927bcb6a0faebcb06ab9925c87524b8057860afacf48eab54fcbf9eef18.css" integrity="sha256-2m4ZJ7y2oPrrywarmSXIdSS4BXhgr6z0jqtU/L+e7xg="><script async defer data-domain=kaiwern.com src=https://plausible.io/js/plausible.js></script>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Lora&family=Source+Sans+Pro:wght@400;600&display=swap" rel=stylesheet><body class="flex flex-col min-h-screen px-6 max-w-prose md:w-2/3 m-auto"><nav class=mt-8><ul id=nav-menu class="w-full flex items-center list-reset"><li><a href=https://zenuo.github.io/>Home</a></li><li><a href=https://zenuo.github.io/fragments/>Fragments</a></li><li><a href=https://zenuo.github.io/about/>Home</a></li><li><a href=https://zenuo.github.io/tags/>Tags</a></li></ul></nav><main class="flex-1 mt-10 sm:mt-12"><header class="mb-8 font-sans-serif"><div class="text-sm font-gray-700 mb-8"><p class="uppercase font-semibold"><a class=text-gray-700 href=/posts>posts</a></p><p>Jun 14, 2020</p></div><h1 class="title mb-2">ğŸ§¯è®°ä¸€æ¬¡ç¯å¢ƒå˜é‡å¯¼è‡´çš„ä¸­æ–‡ä¹±ç </h1><p class="text-sm font-gray-700 mb-4 italic">Estimated Reading Time: 2 minutes (425 words)</p><div id=tags></div></header><article class="prose serif mb-12 text-gray-800"><h2 id=ä¸€ç°è±¡>ä¸€ã€ç°è±¡</h2><ol><li>ä½¿ç”¨æœ¬åœ°<code>ssh</code>è®¿é—®æœåŠ¡å™¨</li><li>é‡å¯åº”ç”¨</li><li><code>æŸ¥è¯¢ä¸»æ•°æ®å•†å“ä¿¡æ¯</code>çš„å†…å®¹ä¸­æ–‡ä¹±ç </li><li><code>jinfo</code>å‘½ä»¤è¾“å‡º<code>file.encoding = ANSI_X3.4-1968</code></li><li>ä½¿ç”¨<code>Xshell</code>è®¿é—®æœåŠ¡å™¨</li><li>é‡å¯åº”ç”¨</li><li><code>jinfo</code>å‘½ä»¤è¾“å‡º<code>file.encoding = UTF-8</code></li><li><code>æŸ¥è¯¢ä¸»æ•°æ®å•†å“ä¿¡æ¯</code>çš„å†…å®¹ä¸­æ–‡æ¢å¤æ­£å¸¸</li></ol><h2 id=äºŒä¸ºä»€ä¹ˆä¹±ç >äºŒã€ä¸ºä»€ä¹ˆä¹±ç </h2><h3 id=çŒœæƒ³>çŒœæƒ³</h3><p>åˆæ­¥çŒœæƒ³æ˜¯<code>æœ¬åœ°ssh</code>å’Œ<code>Xshell</code>çš„<code>sshä¼šè¯</code>çš„<code>locale</code>ä¼šè¯ä¸åŒï¼Œå¯¼è‡´é‡å¯åçš„<code>JVMé»˜è®¤å­—ç¬¦é›†</code>çš„ä¸åŒå¯¼è‡´äº†ä¹±ç ï¼Œä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ¥éªŒè¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.nio.charset.Charset</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>getProperty</span><span class=o>(</span><span class=s>&#34;file.encoding&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>Charset</span><span class=o>.</span><span class=na>defaultCharset</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><blockquote><p>æ€è·¯ï¼šåˆ†åˆ«ä½¿ç”¨<code>æœ¬åœ°ssh</code>å’Œ<code>Xshell</code>è®¿é—®æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹localeå¹¶æ‰§è¡Œä»£ç ç‰‡æ®µ</p></blockquote><p>ä½¿ç”¨<code>æœ¬åœ°ssh</code>è®¿é—®ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>æœåŠ¡å™¨ ~<span class=o>]</span>$ locale
</span></span><span class=line><span class=cl>locale: Cannot <span class=nb>set</span> LC_CTYPE to default locale: No such file or directory <span class=c1># å¼‚å¸¸ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>locale: Cannot <span class=nb>set</span> LC_ALL to default locale: No such file or directory   <span class=c1># å¼‚å¸¸ä¿¡æ¯</span>
</span></span><span class=line><span class=cl><span class=nv>LANG</span><span class=o>=</span>en_US.UTF-8
</span></span><span class=line><span class=cl><span class=nv>LC_CTYPE</span><span class=o>=</span>UTF-8
</span></span><span class=line><span class=cl><span class=nv>LC_NUMERIC</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_TIME</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_COLLATE</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MONETARY</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MESSAGES</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_PAPER</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_NAME</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_ADDRESS</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_TELEPHONE</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MEASUREMENT</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_IDENTIFICATION</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_ALL</span><span class=o>=</span>
</span></span><span class=line><span class=cl><span class=o>[</span>æœåŠ¡å™¨ ~<span class=o>]</span>$ java Main
</span></span><span class=line><span class=cl>ANSI_X3.4-1968
</span></span><span class=line><span class=cl>US-ASCII
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶JVMå±æ€§<code>file.encoding</code>çš„å€¼ä¸º<code>ANSI_X3.4-1968</code>ï¼Œé»˜è®¤å­—ç¬¦é›†ä¸º<code>US-ASCII</code>ï¼›</p><p>ä½¿ç”¨<code>Xshell</code>è®¿é—®ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>æœåŠ¡å™¨ ~<span class=o>]</span>$ locale
</span></span><span class=line><span class=cl><span class=c1># æ²¡æœ‰å¼‚å¸¸ä¿¡æ¯</span>
</span></span><span class=line><span class=cl><span class=nv>LANG</span><span class=o>=</span>en_US.UTF-8
</span></span><span class=line><span class=cl><span class=nv>LC_CTYPE</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_NUMERIC</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_TIME</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_COLLATE</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MONETARY</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MESSAGES</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_PAPER</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_NAME</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_ADDRESS</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_TELEPHONE</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MEASUREMENT</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_IDENTIFICATION</span><span class=o>=</span><span class=s2>&#34;en_US.UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_ALL</span><span class=o>=</span>
</span></span><span class=line><span class=cl><span class=o>[</span>æœåŠ¡å™¨ ~<span class=o>]</span>$ java Main
</span></span><span class=line><span class=cl>UTF-8
</span></span><span class=line><span class=cl>UTF-8
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶JVMå±æ€§<code>file.encoding</code>çš„å€¼ä¸º<code>UTF-8</code>ï¼Œé»˜è®¤å­—ç¬¦é›†ä¸º<code>UTF-8</code>ï¼›</p><h3 id=åˆ°ä»£ç ä¸­éªŒè¯çŒœæƒ³>åˆ°ä»£ç ä¸­éªŒè¯çŒœæƒ³</h3><p>ä¹±ç çš„æ¥å£æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>httpClient</span><span class=o>.</span><span class=na>execute</span><span class=o>(</span><span class=n>request</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=o>(</span><span class=s>&#34;æŸ¥è¯¢å¼‚å¸¸&#34;</span><span class=o>,</span><span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p><code>httpclient</code>æ‰§è¡ŒHTTPè¯·æ±‚ï¼Œexecuteæ–¹æ³•ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>if</span><span class=o>(</span><span class=s>&#34;POST&#34;</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>reqType</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>    <span class=n>responseStr</span> <span class=o>=</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>doHttpPost</span><span class=o>(</span><span class=n>reqParams</span><span class=o>,</span> <span class=n>serverUrl</span><span class=o>));</span> <span class=c1>// æ³¨æ„ç‚¹1ï¼šæŸ¥è¯¢ä¸»æ•°æ®å•†å“ä¿¡æ¯ï¼Œä»£ç ä¼šæ‰§è¡Œæ­¤è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span><span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=s>&#34;GET&#34;</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>reqType</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>    <span class=n>responseStr</span> <span class=o>=</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>doHttpGet</span><span class=o>(</span><span class=n>reqParams</span><span class=o>,</span><span class=n>serverUrl</span><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p><code>æ³¨æ„ç‚¹1</code>è¿™è¡Œä»£ç ï¼Œé€šè¿‡è°ƒç”¨<code>doHttpPost</code>æ–¹æ³•ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>URIBuilder</span> <span class=n>uriBuilder</span> <span class=o>=</span> <span class=k>new</span> <span class=n>URIBuilder</span><span class=o>(</span><span class=n>serverUrl</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>HttpPost</span> <span class=n>httpPost</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HttpPost</span><span class=o>(</span><span class=n>uriBuilder</span><span class=o>.</span><span class=na>build</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=n>httpPost</span><span class=o>.</span><span class=na>setHeader</span><span class=o>(</span><span class=s>&#34;Accept&#34;</span><span class=o>,</span> <span class=s>&#34;application/json;charset=utf-8&#34;</span><span class=o>);</span> <span class=c1>// æ³¨æ„ç‚¹2ï¼šå¤´éƒ¨AcceptæŒ‡å®šäº†æ¥å—çš„å“åº”å­—ç¬¦é›†ä¸ºutf-8ï¼Œä½†HTTPåè®®å¹¶æœªå¼ºåˆ¶æœåŠ¡ç«¯è¦æ ¹æ®Acceptçš„å­—ç¬¦é›†æ¥å“åº”ï¼Œæ‰€ä»¥éœ€è¦å…¶ä»–æ–¹æ³•æ¥åˆ¤æ–­å“åº”çš„å­—ç¬¦é›†
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>httpPost</span><span class=o>.</span><span class=na>setHeader</span><span class=o>(</span><span class=s>&#34;Content-Type&#34;</span><span class=o>,</span> <span class=s>&#34;application/json;charset=utf-8&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=k>this</span><span class=o>.</span><span class=na>addHeader</span><span class=o>(</span><span class=n>httpPost</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>StringEntity</span> <span class=n>postingString</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringEntity</span><span class=o>(</span><span class=n>JSONObject</span><span class=o>.</span><span class=na>toJSONString</span><span class=o>(</span><span class=n>params</span><span class=o>),</span> <span class=s>&#34;utf-8&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>httpPost</span><span class=o>.</span><span class=na>setEntity</span><span class=o>(</span><span class=n>postingString</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>getEntityAndRelease</span><span class=o>(</span><span class=n>httpPost</span><span class=o>);</span>
</span></span></code></pre></div><blockquote><p>æ¥ä¸‹æ¥åœ¨å¼€å‘ç¯å¢ƒï¼Œé€šè¿‡æ”¹å˜å¤´éƒ¨<code>Accept</code>çš„<code>charset</code>ï¼Œæ·»åŠ JVMå‚æ•°<code>-Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.SimpleLog -Dorg.apache.commons.logging.simplelog.log.org.apache.http=DEBUG</code>ï¼Œè§‚å¯ŸHTTPå“åº”çš„å¤´éƒ¨<code>Content-Type</code>çš„æ–¹å¼æ¥åˆ¤æ–­å“åº”çš„ç¼–ç </p></blockquote><ul><li>charsetè®¾ç½®ä¸ºutf-8æ—¶ï¼Œæ—¥å¿—ä¸ºï¼š</li></ul><pre tabindex=0><code>[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;POST /winshare-center-gateway/api/item/v1/item/ec/4435922 HTTP/1.1[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Accept: application/json;charset=utf-8[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Content-Type: application/json;charset=utf-8[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Content-Length: 14[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Host: 10.100.9.202:8607[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Connection: Keep-Alive[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Accept-Encoding: gzip,deflate[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;{&#34;id&#34;:4435922}&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;HTTP/1.1 503 Service Unavailable[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;Content-Type: application/json;charset=UTF-8[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;Content-Length: 186[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;[\r][\n]&#34;
</code></pre><ul><li>charsetè®¾ç½®ä¸ºgb18030æ—¶ï¼Œæ—¥å¿—ä¸ºï¼š</li></ul><pre tabindex=0><code>[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;POST /winshare-center-gateway/api/item/v1/item/ec/4435922 HTTP/1.1[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Accept: application/json;charset=gb18030[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Content-Type: application/json;charset=utf-8[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Content-Length: 14[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Connection: Keep-Alive[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;Accept-Encoding: gzip,deflate[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &gt;&gt; &#34;{&#34;id&#34;:4435922}&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;HTTP/1.1 503 Service Unavailable[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;Content-Type: application/json;charset=UTF-8[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;Content-Length: 186[\r][\n]&#34;
[DEBUG] wire - http-outgoing-0 &lt;&lt; &#34;[\r][\n]&#34;
</code></pre><p>é€šè¿‡æŸ¥çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬å‘ç°å“åº”çš„å­—ç¬¦é›†éƒ½æ˜¯UTF-8ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ–¹æ³•è¿”å›çš„å­—èŠ‚æ•°ç»„åº”è¯¥è¢«UTF-8è§£ç ï¼›</p><p>å›åˆ°<code>æ³¨æ„ç‚¹1</code>ï¼Œæ­¤å¤„ä½¿ç”¨äº†æ„é€ æ–¹æ³•<code>java.lang.String#String(byte[])</code>åˆ›å»ºStringå®ä¾‹ï¼Œæ­¤æ„é€ æ–¹æ³•ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†è§£ç å­—èŠ‚æ•°ç»„ï¼Œä½¿ç”¨<code>æœ¬åœ°ssh</code>é‡å¯åï¼Œé»˜è®¤å­—ç¬¦é›†ä¸º<code>US-ASCII</code>ï¼Œè€Œä¸æ˜¯<code>UTF-8</code>ï¼Œè¿™æ˜¯æ­¤æ¬¡å‘ç”Ÿä¹±ç çš„ç¼–ç åŸå› ã€‚</p><h2 id=ä¸‰ä¸ºä»€ä¹ˆæœ¬åœ°sshä¸xshellè¡¨ç°ä¸åŒ>ä¸‰ã€ä¸ºä»€ä¹ˆæœ¬åœ°sshä¸Xshellè¡¨ç°ä¸åŒ</h2><p>æŸ¥èµ„æ–™å¾—çŸ¥ï¼Œæœ¬åœ°<code>/etc/ssh/ssh_config</code>å«æœ‰<code>SendEnv LANG LC_*</code>ï¼Œæ­¤é€‰é¡¹æŒ‡æ˜äº†åˆ›å»ºsshä¼šè¯æ—¶ï¼Œå°†æœ¬åœ°çš„<code>LANG</code>å’Œ<code>LC_*</code>ç¯å¢ƒå˜é‡å‘é€åˆ°æœåŠ¡ç«¯ï¼Œä½¿å¾—åˆ›å»ºçš„sshä¼šè¯ä½¿ç”¨æœ¬åœ°çš„<code>LANG</code>å’Œ<code>LC_*</code>ç¯å¢ƒå˜é‡ï¼›</p><p>ä½†æ˜¯æœ¬åœ°çš„è¿™äº›å˜é‡çš„å€¼æ˜¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>æœ¬åœ° ~<span class=o>]</span>$ locale
</span></span><span class=line><span class=cl><span class=nv>LANG</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_COLLATE</span><span class=o>=</span><span class=s2>&#34;C&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_CTYPE</span><span class=o>=</span><span class=s2>&#34;UTF-8&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MESSAGES</span><span class=o>=</span><span class=s2>&#34;C&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_MONETARY</span><span class=o>=</span><span class=s2>&#34;C&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_NUMERIC</span><span class=o>=</span><span class=s2>&#34;C&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_TIME</span><span class=o>=</span><span class=s2>&#34;C&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>LC_ALL</span><span class=o>=</span>
</span></span></code></pre></div><p>è¿˜è®°å¾—æœ¬åœ°sshè®¿é—®æœåŠ¡å™¨æ‰§è¡Œ<code>locale</code>æ—¶çš„è¿™ä¸¤è¡ŒæŠ¥é”™å—ï¼Ÿ</p><pre tabindex=0><code>locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory
</code></pre><p>è¯´æ˜å½“å‰çš„æœåŠ¡å™¨é…ç½®æ˜¯ä¸æ”¯æŒ<code>LC_CTYPE="UTF-8"</code>å’Œ<code>LC_ALL=</code>çš„ï¼Œä½†æœªå¼•èµ·é‡è§†ï¼Œä¸€ç›´é€‰æ‹©çš„å¿½ç•¥ï¼›è§£å†³åŠæ³•æ˜¯ï¼šæ³¨é‡Šæœ¬åœ°çš„<code>/etc/ssh/ssh_config</code>ä¸­çš„<code>SendEnv LANG LC_*</code></p><h2 id=å››å¾—åˆ°çš„æ•™è®­>å››ã€å¾—åˆ°çš„æ•™è®­</h2><ol><li>sshè®¿é—®æœåŠ¡å™¨æ—¶ï¼Œä¸è¦ä½¿ç”¨æœ¬åœ°çš„localeè®¾ç½®ï¼Œé¿å…æœ¬åœ°ç¯å¢ƒå½±å“æœåŠ¡å™¨</li><li>å¯åŠ¨åº”ç”¨æ—¶é€šè¿‡JVMæŒ‡å®šæ–‡ä»¶ç¼–ç ï¼ˆ<code>-Dfile.encoding=UTF-8</code>ï¼‰ï¼Œæ’é™¤å¯åŠ¨çš„<code>sshä¼šè¯</code>å¯¹åº”ç”¨çš„æ–‡ä»¶ç¼–ç çš„å½±å“</li><li>ç¼–ç æ—¶ä¸è¦å‡å®šä»»ä½•çš„ç¯å¢ƒå˜é‡ï¼šè§£ç å­—èŠ‚æ•°ç»„æ—¶ï¼ŒæŒ‡å®šå­—ç¬¦é›†ï¼Œä¸ä½¿ç”¨é»˜è®¤å­—ç¬¦é›†</li></ol><h2 id=äº”å‚è€ƒ>äº”ã€å‚è€ƒ</h2><p>1 <a href=https://tools.ietf.org/html/rfc7231#section-5.3.3>Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>
2 <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#%3Cinit%3E(byte%5B%5D)>String ( Java SE 11 & JDK 11 )</a>
3 <a href=https://linux.die.net/man/5/ssh_config>man 5 ssh_config</a></p></article></main><hr><footer class="w-full text-center p-4 pin-b text-xs text-gray-400"><p>made with <a href=https://gohugo.io class="underline hover:text-blue-400">Hugo</a> and <a href=https://tailwindcss.com class="underline hover:text-blue-400">TailwindCSS</a></p></footer></body></html>