---
layout: single
toc: true
---

æœ€è¿‘çš„å·¥ä½œæ˜¯è¿ç§»ä¸€ä¸ªå†å²é—ç•™çš„å·¥ä»¶ï¼ˆæœ¬æ–‡ç§°ä¹‹ä¸ºå·¥ä»¶Aï¼‰ï¼Œé¦–å…ˆéœ€è¦æ¢³ç†è¿™ä¸ªå·¥ä»¶çš„æ¶ˆè´¹è€…ã€‚åˆæ­¥è®¡åˆ’æŒ‰ç…§ä¸‹é¢æ­¥éª¤è¿›è¡Œï¼š

1. åœ¨ä»£ç æœç´¢å¼•æ“ï¼ˆä¾‹å¦‚[zoekt](https://github.com/sourcegraph/zoekt)ï¼‰é‡Œæœç´¢ï¼š
    - å…³é”®è¯ï¼šå·¥ä»¶Açš„javaæ–‡ä»¶å¤´éƒ¨çš„importåŒ…å
    - æ–‡ä»¶ç±»å‹ï¼šjava
    ç„¶åå°†æ‰€æœ‰ç»“æœçš„å·¥ç¨‹åè¿›è¡Œæ’é‡ï¼Œå¾—åˆ°å·¥ä»¶Açš„æ‰€æœ‰æ¶ˆè´¹è€…å·¥ç¨‹ã€‚
    > Q:ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æœç´¢`pom.xml`æ–‡ä»¶ä¸­æœç´¢å·¥ä»¶Açš„åç§°å‘¢ï¼Ÿ
    > 
    > A:å› ä¸ºå­˜åœ¨å·¥ä»¶Açš„æ¶ˆè´¹è€…å·¥ä»¶ä¼ é€’ä¾èµ–å·¥ä»¶Açš„æƒ…å†µï¼Œæ­¤ç§æ–¹æ³•ä¸èƒ½è¦†ç›–ä¼ é€’ä¾èµ–çš„åœºæ™¯ğŸ¥¹
2. ä½¿ç”¨`Intellij IDEA`æ‰“å¼€æ¯ä¸ªæ¶ˆè´¹è€…å·¥ç¨‹ï¼Œä¾æ¬¡æŸ¥çœ‹å·¥ä»¶Aä¸­çš„æœåŠ¡æ¥å£ï¼ˆinterfaceï¼‰çš„ä½¿ç”¨ï¼Œèœå•`Navigatie>Declaration or Usages`
3. è®°å½•å·¥ä»¶Açš„æœåŠ¡æ¥å£å­˜åœ¨è¢«ä½¿ç”¨çš„æ–¹æ³•ï¼ˆåç»­å®ç°å¯¹åº”çš„æ›¿æ¢æ¥å£ï¼‰

ğŸ¤¨ä¸è¿‡çœ‹ç¬¬2ã€3ä¸ªæ­¥éª¤çœ‹èµ·æ¥æŒºèŠ±æ—¶é—´çš„ï¼Œè¿˜æœ‰å…¶ä»–åŠæ³•å—ï¼Ÿ

ç›®å‰æƒ³åˆ°çš„å…¶ä»–åŠæ³•å°±æ˜¯ä»ç¼–è¯‘å™¨æ—¥å¿—ä¸‹æ‰‹ï¼Œ[æŸ¥å¾—](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html)å¯ä»¥ä½¿ç”¨`-verbose`é€‰é¡¹ï¼Œæ¥å®ç°ï¼š

> Uses verbose output, which includes information about each class loaded and each source file compiled.

ä¸‹é¢é€šè¿‡ä¸€ä¸ªdemoæ¥æ¼”ç¤ºï¼š

1. ä½¿ç”¨mavenåˆ›å»ºå·¥ä»¶Aï¼š

    ```
    âœ mvn archetype:generate \
            -DarchetypeGroupId=org.apache.maven.archetypes \
            -DarchetypeArtifactId=maven-archetype-quickstart \
            -DarchetypeVersion=RELEASE \
            -DgroupId=demo.a \
            -DartifactId=demo-a \
            -Dversion=0.0.1-SNAPSHOT \
            -DinteractiveMode=false
    ```

    ç„¶åæ·»åŠ dtoã€serviceç±»ï¼š

    ```
    âœ tree src/main/java/
    src/main/java/
    â””â”€â”€ demo
        â””â”€â”€ a
            â”œâ”€â”€ dto
            â”‚Â Â  â”œâ”€â”€ ProductDto.java
            â”‚Â Â  â””â”€â”€ StockDto.java
            â””â”€â”€ service
                â”œâ”€â”€ IProductService.java
                â””â”€â”€ impl
                    â””â”€â”€ ProductServiceImpl.java

    5 directories, 4 files
    ```

    install åˆ°æœ¬åœ°ä»“åº“ï¼š

    ```
    âœ mvn install
    ```
2. ä½¿ç”¨mavenåˆ›å»ºæ¶ˆè´¹è€…å·¥ä»¶ï¼š

    ```
    âœ mvn archetype:generate \
            -DarchetypeGroupId=org.apache.maven.archetypes \
            -DarchetypeArtifactId=maven-archetype-quickstart \
            -DarchetypeVersion=RELEASE \
            -DgroupId=demo.consumer \
            -DartifactId=demo-consumer \
            -Dversion=0.0.1-SNAPSHOT \
            -DinteractiveMode=false
    ```

    åœ¨pom.xmlæ·»åŠ `å·¥ä»¶Açš„ä¾èµ–`ï¼š

    ```xml
    <dependency>
      <groupId>demo</groupId>
      <artifactId>demo-a</artifactId>
      <version>0.0.1-SNAPSHOT</version>
    </dependency>
    ```

    åœ¨Appç±»mainæ–¹æ³•ä½¿ç”¨`demo.a.service.IProductService`ï¼š
    ```java
    package demo.consumer;

    import demo.a.dto.ProductDto;
    import demo.a.service.IProductService;
    import demo.a.service.impl.ProductServiceImpl;

    /**
    * Hello world!
    */
    public class App {
        public static void main(String[] args) {
            final IProductService productService = new ProductServiceImpl();
            final ProductDto productDto = productService.getProductById("1"); // æ³¨æ„ç‚¹1
            System.out.println(productDto.price);
        }
    }
    ```

    åœ¨pom.xmlçš„`maven-compiler-plugin`é…ç½®javacå‚æ•°`-verbose`ï¼š
    ```xml
    <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.0</version>
        <configuration>
        <compilerArgs>
            <arg>-verbose</arg>
        </compilerArgs>
        </configuration>
    </plugin>
    ```

    æ„å»ºå¹¶ä¸”å°†javacæ—¥å¿—é‡å®šå‘åˆ°æ–‡ä»¶`javac.log`ï¼š

    ```
    âœ mvn clean compile 2>javac.log
    ```

3. æŸ¥çœ‹æ–‡ä»¶[javac.log](../assets/file/2d30214fc6d4d32d22cf9563/javac.log)ï¼Œä¸éš¾å‘ç°ä½¿ç”¨åˆ°çš„æœåŠ¡æ¥å£ç±»åŠdtoç±»éƒ½åœ¨æ—¥å¿—ä¸­ï¼š
    ```
    âœ grep -nF /demo/a/ javac.log 
    5:[loading /Users/zenuo/.m2/repository/demo/demo-a/0.0.1-SNAPSHOT/demo-a-0.0.1-SNAPSHOT.jar(/demo/a/dto/ProductDto.class)]
    6:[loading /Users/zenuo/.m2/repository/demo/demo-a/0.0.1-SNAPSHOT/demo-a-0.0.1-SNAPSHOT.jar(/demo/a/service/IProductService.class)]
    7:[loading /Users/zenuo/.m2/repository/demo/demo-a/0.0.1-SNAPSHOT/demo-a-0.0.1-SNAPSHOT.jar(/demo/a/service/impl/ProductServiceImpl.class)]
    ```

ğŸ§å›åˆ°javaä»£ç ä¸­çš„`æ³¨æ„ç‚¹1`ï¼šè¿™ç§å†™æ³•æ˜¾å¼importäº†`demo.a.dto.ProductDto`ï¼Œè‹¥æ¢æˆä¸æ˜¾å¼importçš„å†™æ³•ï¼Œæ—¥å¿—ä¸­æ˜¯å¦ä»ç„¶å­˜åœ¨`demo.a.dto.ProductDto`å‘¢ï¼Ÿç°åœ¨å°†ä»£ç æ”¹ä¸ºå¦‚ä¸‹ï¼š

```java
package demo.consumer;

import demo.a.service.IProductService;
import demo.a.service.impl.ProductServiceImpl;

/**
 * Hello world!
 */
public class App {
    public static void main(String[] args) {
        final IProductService productService = new ProductServiceImpl();
        System.out.println(productService.getProductById("1").price);
    }
}
```

æ„å»ºå¹¶ä¸”å°†javacæ—¥å¿—é‡å®šå‘åˆ°æ–‡ä»¶`javac.log.1`ï¼š

```
âœ mvn clean compile 2>javac.log.1
```

æŸ¥çœ‹[javac.log.1](../assets/file/2d30214fc6d4d32d22cf9563/javac.log.1)ï¼Œæ˜¯ä»ç„¶å­˜åœ¨çš„ï¼Œåªæ˜¯ä½ç½®ä¸åŒï¼š

```
âœ grep -nF /demo/a/ javac.log.1  
5:[loading /Users/zenuo/.m2/repository/demo/demo-a/0.0.1-SNAPSHOT/demo-a-0.0.1-SNAPSHOT.jar(/demo/a/service/IProductService.class)]
6:[loading /Users/zenuo/.m2/repository/demo/demo-a/0.0.1-SNAPSHOT/demo-a-0.0.1-SNAPSHOT.jar(/demo/a/service/impl/ProductServiceImpl.class)]
17:[loading /Users/zenuo/.m2/repository/demo/demo-a/0.0.1-SNAPSHOT/demo-a-0.0.1-SNAPSHOT.jar(/demo/a/dto/ProductDto.class)]
```

å®ä¾‹ä»£ç [demo.zip](../assets/file/2d30214fc6d4d32d22cf9563/demo.zip)

## å‚è€ƒ

- [Java Platform, Standard Edition Tools Reference](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html)
- [trying to capture javac output in bash shell](https://stackoverflow.com/questions/317733/trying-to-capture-javac-output-in-bash-shell)
- [How to create an empty multi module Maven project?](https://stackoverflow.com/questions/6328778/how-to-create-an-empty-multi-module-maven-project)
