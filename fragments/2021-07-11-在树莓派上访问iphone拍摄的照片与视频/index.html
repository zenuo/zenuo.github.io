<!doctype html><html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>📷在树莓派上访问iPhone拍摄的照片与视频</title><meta name=generator content="Hugo 0.112.3"><link rel=stylesheet href="https://zenuo.github.io/css/styles.min.da6e1927bcb6a0faebcb06ab9925c87524b8057860afacf48eab54fcbf9eef18.css" integrity="sha256-2m4ZJ7y2oPrrywarmSXIdSS4BXhgr6z0jqtU/L+e7xg="><script async defer data-domain=kaiwern.com src=https://plausible.io/js/plausible.js></script>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Lora&family=Source+Sans+Pro:wght@400;600&display=swap" rel=stylesheet><body class="flex flex-col min-h-screen px-6 max-w-prose md:w-2/3 m-auto"><nav class=mt-8><ul id=nav-menu class="w-full flex items-center list-reset"><li><a href=https://zenuo.github.io/>Home</a></li><li><a href=https://zenuo.github.io/fragments/>Fragments</a></li><li><a href=https://zenuo.github.io/about/>About</a></li><li><a href=https://zenuo.github.io/tags/>Tags</a></li></ul></nav><main class="flex-1 mt-10 sm:mt-12"><div><header class="mb-8 font-sans-serif"><div class="text-sm font-gray-700 mb-8"><p class="uppercase font-semibold"><a class=text-gray-700 href=/fragments>fragments</a></p><p>Jul 11, 2021</p></div><h1 class="text-3xl mb-1 font-semibold">📷在树莓派上访问iPhone拍摄的照片与视频</h1><p class="italic text-xs">Last updated at: Jul 11, 2021</p></header><article class="prose serif mb-16 text-gray-800"><p>我的iPhone照片与视频的体积超过了免费iCloud提供的<strong>5GB</strong>，但又<del>不喜欢</del>（qiong）订阅iCloud的付费扩容计划，所以看看是否能将这些照片与视频备份到<strong>树莓派挂载的硬盘</strong>上。</p><p>硬件情况：</p><ol><li>树莓派硬件：树莓派2B</li><li>树莓派软件：Arch Linux ARM</li><li>iPhone硬件：iPhone 11</li><li>iPhone软件：14.6</li></ol><p>下面是我的操作步骤：</p><ol><li><p>为了安装<a href=https://libimobiledevice.org/>ifuse</a>，需要安装<a href=https://github.com/Jguer/yay>yay</a>，但我的树莓派的pacman源并未收纳yay，所以参考官方文档构建后安装：</p><pre tabindex=0><code>sudo pacman -S --needed git base-devel
# 科学上网，避免网络不畅通导致的时间浪费
export http_proxy=socks5://127.0.0.1:1080;export https_proxy=socks5://127.0.0.1:1080;export ALL_PROXY=socks5://127.0.0.1:1080
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si
</code></pre></li><li><p>安装ifuse：</p><pre tabindex=0><code>yay -S ifuse
</code></pre><p>选择<code>ifuse</code>，而不是<code>ifuse-git</code>，然后会请求安装一些依赖，允许即可。编译🧬安装需要一些时间，耐心等待～</p></li><li><p>安装完成后，运行<strong>usbmuxd</strong>服务：</p><pre tabindex=0><code>sudo systemctl start usbmuxd.service
</code></pre><p>若运行成功，此时使用usb连接树莓派与iPhone，iPhone上会弹窗询问是否信任该计算机，选择信任即可（这还用说？😂）</p></li><li><p>确认iPhone连接成功：</p><pre tabindex=0><code>idevicepair validate
</code></pre></li><li><p>创建一个挂载点：</p><pre tabindex=0><code>mkdir ~/phone
</code></pre></li><li><p>挂载iPhone文件系统：</p><pre tabindex=0><code>ifuse ~/phone
</code></pre></li><li><p>使用rsync同步到硬盘（挂载点为**/opt/d01/**）：</p><pre tabindex=0><code>rsync -aP ~/phone/DCIM /opt/d01
</code></pre><p>我的树莓派挂载的硬盘是无自带电源的外置的usb硬盘，若此时再同时连接上iPhone，树莓派的电源功率会不足，导致无妨访问硬盘；所以我用了一个自带电源的usb hub，硬盘和iPhone通过hub连接到树莓派，如图：</p><p><img src=/img/0d95113b4d63df4097654fea.jpg alt=0d95113b4d63df4097654fea.jpg></p></li><li><p>同步完成后，卸载iPhone文件系统：</p><pre tabindex=0><code>fusermount -u ~/phone
</code></pre></li></ol><p>参考：</p><ul><li><a href=https://evanwill.github.io/_drafts/notes/iphone-transfer.html>https://evanwill.github.io/_drafts/notes/iphone-transfer.html</a></li><li><a href=https://wiki.archlinux.org/title/IOS#Manual_mounting>https://wiki.archlinux.org/title/IOS#Manual_mounting</a></li><li><a href=http://www.ruanyifeng.com/blog/2020/08/rsync.html>http://www.ruanyifeng.com/blog/2020/08/rsync.html</a></li></ul><div class="float-right mb-8"><p class="text-sm mb-4 font-gray-700 italic">(65 words)</p></div></article></div></main><hr><footer class="w-full text-center p-4 pin-b text-xs text-gray-400"><p>made with <a href=https://gohugo.io class="underline hover:text-blue-400">Hugo</a> and <a href=https://tailwindcss.com class="underline hover:text-blue-400">TailwindCSS</a></p></footer></body></html>